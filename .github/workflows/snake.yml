name: Generate Snake Animation

on:
  schedule:
    # Runs at 00:00 UTC every day
    - cron: "0 0 * * *" 
  # Allows manual triggering from the Actions tab
  workflow_dispatch:

jobs:
  generate:
    runs-on: ubuntu-latest
    
    # ðŸš¨ REQUIRED: Gives the workflow permission to commit files to your repo
    permissions:
      contents: write 

    steps:
      # Step 1: Check out your repository code
      - uses: actions/checkout@v4
      
      # Step 2: Generate the snake animation
      - name: generate snake svg
        uses: Platypus-Code-Creator/github-profile-trophy-snake@v1
        with:
          github_user_name: ${{ github.repository_owner }}
          # ðŸš¨ CRITICAL: This is the location where the SVG is saved. 
          # It matches the path in your README link: 
          # https://raw.githubusercontent.com/.../output/snake.svg
          output: output/snake.svg 
          
      # Step 3: Commit the new SVG file back to your repository
      - name: Commit files
        run: |
          git config --global user.email "41898282+github-actions[bot]@users.noreply.github.com"
          git config --global user.name "github-actions[bot]"
          
          # Add the generated file and commit it
          git add output/snake.svg 
          git commit -m "Generate new snake animation" -a
          
      # Step 4: Push the commit to your main branch
      - uses: ad-m/github-push-action@master
        with:
          branch: main # or master, depending on your default branch name
          github_token: ${{ secrets.GITHUB_TOKEN }}
